<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="iep_member">
  <!-- 아이디 중복 체크 -->
  <select id='checkId' resultType='int' parameterType='String'>
    SELECT COUNT(me_id) as cnt
    FROM IEP_MEMBER
    WHERE me_id=#{me_id}
  </select>
  <!-- 닉네임 중복 체크 -->
  <select id='checkNick' resultType='int' parameterType='String'>
    SELECT COUNT(me_nick) as cnt
    FROM IEP_MEMBER
    WHERE me_nick=#{me_nick}
  </select>
  <!-- 회원가입 등록 -->
  <insert id="create" parameterType="IEP_MemberVO">
    INSERT INTO IEP_MEMBER(me_no, me_id, me_pw, me_nick, me_name, me_zipcode,
    me_addr1, me_addr2, me_tel, me_date)
    VALUES ((SELECT NVL(MAX(me_no), 0)+1 as me_no FROM IEP_MEMBER),
    #{me_id}, #{me_pw}, #{me_nick}, #{me_name}, #{me_zipcode}, #{me_addr1},
    #{me_addr2}, #{me_tel}, sysdate)
  </insert>
  <!-- 회원 목록 확인 -->
  <select id="list" resultType="IEP_MemberVO">
    SELECt me_no, me_id, me_pw,
    me_nick, me_name, me_zipcode, me_addr1, me_addr2, me_tel, me_date
    FROM IEP_MEMBER
    ORDER BY me_no ASC
  </select>

  <select id="login" resultType="int" parameterType="IEP_MemberVO">
    SELECT
    COUNT(me_id) as cnt
    FROM iep_member
    WHERE me_id=#{me_id} AND
    me_pw=#{me_pw}
  </select>
</mapper>